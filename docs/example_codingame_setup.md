# Example setup for CodinGame

We are going to setup CG Arena for generic CodinGame challenge. We would use [Cellularena](https://www.codingame.com/multiplayer/bot-programming/winter-challenge-2024) as an example.

## Creating the new arena

First, let's create a new arena:

```
cgarena init winter-challenge-2024
cd winter-challenge-2024
```

## Configuration

We can use the default config generated by `cgarena init` for the most settings.

Let's review the game settings part:

- `[game]`
  - `min_players` is already set to **2**
  - `max_players` is already set to **2**
  - `symmetric` is already set to **true**

## Worker configuration

### Concurrency

We would need to set `threads` based on our CPU. In my case I set to **4**.

```toml
threads = 4
```

### Commands

Let's review the default settings for the embedded worker:

```toml
cmd_play_match = "python play_game.py {SEED} {PLAYERS}"
cmd_build = "sh build.sh {DIR} {LANG}"
cmd_run = "sh run.sh {DIR} {LANG}"
```

The `cgarena init` command we used to create an arena also generated the following files for us:

- `play_game.py`
- `build.sh`
- `run.sh`

Please feel free to check them. You can add also add support for the new programming languages.

By default "c++" and "python" languages are support. 

### Languages that need workspace

For languages which need project folder (e.g. Rust) you build bot the following way:

- create a single project somewhere and configure it to be the same as CG (e.g. has all the dependencies)
- inside the `build.sh` copy `source.txt` to that project folder (e.g. `main.rs` for Rust)
- build the project
- copy the executable from the project build to the bot directory

You can see this in actions in the `build.sh` and `run.sh` commands above for `"rust"` language.

The `cargo.toml` inside `rust-workdir` looks like this (this is same as CG, might be outdated):

```toml
[package]
name = "rust-workdir"
version = "0.1.0"
edition = "2018"

[dependencies]
chrono = "0.4.26"
itertools = "0.11.0"
libc = "0.2.147"
# rand is a bit of a mess, see https://www.codingame.com/forum/t/languages-update/1574/120
rand_core = "0.6.3"
rand = { version = "0.8.5", features = ["small_rng"] }
regex = "1.8.4"
time = "0.3.22"
```